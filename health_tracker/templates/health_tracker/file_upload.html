{% extends "health_tracker/layout.html" %}
{% load static %}
{% block title %}Upload File{% endblock %}
{% block styling %}
<link rel="stylesheet" href="{% static 'health_tracker/scss/upload.css' %}">
{% endblock %}
{% block body %}

    {% if message %}
        <script>
            alert("{{ message }}"); // why alert?
        </script>
    {% endif %}
    <div>
        <div>
            <h1 class="title">Upload File</h1>
        </div>
    </div> 
    <form method='POST' action="{% url 'upload_file' %}" enctype="multipart/form-data" id="upload-form">
        {% csrf_token %}
        {{form}}
        <!-- <label for="document">Upload Document</label>
        <input type="file" name ='document'>
        <label for="wbid">Patient's WBID</label>
        <input type="number" name="wbid" required>
        <label for="vendor">Name of person uploading this document</label>
        <input type="text" name="vendor"></input>-->
        <button type="submit">Upload</button>
    </form>

{% endblock %}

{% block script %}
<script>
    function main()
    {
        $("#upload-form").on("submit", function() {
            for(file of $("#id_file_field").prop("files"))
            {
                let size = file.size/(1000000)
                if(size > 50)
                {
                    alert("Each file cannot be larger than 50mb!")
                    return false;
                 }
            }
        })
    }
    $(document).ready(main)
</script>
{% endblock script %}