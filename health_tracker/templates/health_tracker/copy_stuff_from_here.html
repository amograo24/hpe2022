{% extends "health_tracker/layout.html" %}

<!--copy paste the div tags here in your respective templates to make them work-->

{% block body %}
{% csrf_token %}
<button id="test">test</button>
<button id="test2">check</button>
<script>


    function handle_rec()
    {
        let token = $("input[name='csrfmiddlewaretoken']").val()
        let header = {"X-CSRFToken": token}
        let payload = JSON.stringify({type: "receive"})
        let content = {
            method: "POST", headers: header, body: payload
        }
        let request = fetch("{% url 'notifications' %}", content)
        request.then((data) => {console.log(data);})
    }

    function handle_send()
    {
        let token = $("input[name='csrfmiddlewaretoken']").val()
        let header = {"X-CSRFToken": token}
        let payload = JSON.stringify({to: "2545358385363300", as: "{{ division }}", type: "send"})
        let content = 
        {
            method: "POST",
            headers: header,
            body: payload
        }
        let request = fetch("{% url 'notifications' %}", content)

    }

    $(document).ready(()=>{
        $("#test").click(handle_send)
        $("#test2").click(handle_rec)
    })

</script>
{% endblock body %}