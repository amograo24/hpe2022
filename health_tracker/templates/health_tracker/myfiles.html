{% extends "health_tracker/layout.html" %}

{% block title %}{% endblock %}


{% block body %}
   {% for file in files %}
      <!-- <a href="{#% url 'file_page' file.recipent file.file %#}">kk</a> -->
      <a href="media/{{file.file}}"><h1 class="file_name_class" id="file{{file.id}}" data-name={{file.file}} onload="FilePathToString(file.file)">{{file.file}}</h1></a>
      <h1>Uploaded By: {{file.uploader.full_com_name}}</h1>
      <h1>{{file.tags|slice:"2:"}}</h1>
   {% endfor %}
{% endblock %}
{% block script %}
   <script>
      // document.addEventListener('DOMContentLoaded',FilePathToString);
      let file_name_class = document.querySelectorAll('.file_name_class')
      let file_name_array=[...file_name_class]
      file_name_array.forEach(element => {
         FilePathToString(element.id.slice(4),element.getAttribute("data-name"))
      })
      function FilePathToString(id,file) {
         let path_name=String(`${file}`)
         let file_name=path_name.split("/").slice(-1)[0]
         document.querySelector(`#file${id}`).innerHTML=`${file_name}`;
      }
      
   </script>
{% endblock %}